// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.29.0
// source: themes.sql

package db

import (
	"context"
	"database/sql"
)

const countFacilityThemeName = `-- name: CountFacilityThemeName :one
SELECT COUNT(*) FROM themes
WHERE facility_id = ?1
  AND name = ?2
`

type CountFacilityThemeNameParams struct {
	FacilityID sql.NullInt64 `json:"facilityId"`
	Name       string        `json:"name"`
}

func (q *Queries) CountFacilityThemeName(ctx context.Context, arg CountFacilityThemeNameParams) (int64, error) {
	row := q.queryRow(ctx, q.countFacilityThemeNameStmt, countFacilityThemeName, arg.FacilityID, arg.Name)
	var count int64
	err := row.Scan(&count)
	return count, err
}

const countFacilityThemeNameExcludingID = `-- name: CountFacilityThemeNameExcludingID :one
SELECT COUNT(*) FROM themes
WHERE facility_id = ?1
  AND name = ?2
  AND id != ?3
`

type CountFacilityThemeNameExcludingIDParams struct {
	FacilityID sql.NullInt64 `json:"facilityId"`
	Name       string        `json:"name"`
	ID         int64         `json:"id"`
}

func (q *Queries) CountFacilityThemeNameExcludingID(ctx context.Context, arg CountFacilityThemeNameExcludingIDParams) (int64, error) {
	row := q.queryRow(ctx, q.countFacilityThemeNameExcludingIDStmt, countFacilityThemeNameExcludingID, arg.FacilityID, arg.Name, arg.ID)
	var count int64
	err := row.Scan(&count)
	return count, err
}

const countFacilityThemes = `-- name: CountFacilityThemes :one
SELECT COUNT(*) FROM themes
WHERE facility_id = ?1
`

func (q *Queries) CountFacilityThemes(ctx context.Context, facilityID sql.NullInt64) (int64, error) {
	row := q.queryRow(ctx, q.countFacilityThemesStmt, countFacilityThemes, facilityID)
	var count int64
	err := row.Scan(&count)
	return count, err
}

const createTheme = `-- name: CreateTheme :one
INSERT INTO themes (
    facility_id,
    name,
    is_system,
    primary_color,
    secondary_color,
    tertiary_color,
    accent_color,
    highlight_color
) VALUES (
    ?1,
    ?2,
    ?3,
    ?4,
    ?5,
    ?6,
    ?7,
    ?8
)
RETURNING id, facility_id, name, is_system, primary_color, secondary_color,
    tertiary_color, accent_color, highlight_color, created_at, updated_at
`

type CreateThemeParams struct {
	FacilityID     sql.NullInt64 `json:"facilityId"`
	Name           string        `json:"name"`
	IsSystem       bool          `json:"isSystem"`
	PrimaryColor   string        `json:"primaryColor"`
	SecondaryColor string        `json:"secondaryColor"`
	TertiaryColor  string        `json:"tertiaryColor"`
	AccentColor    string        `json:"accentColor"`
	HighlightColor string        `json:"highlightColor"`
}

func (q *Queries) CreateTheme(ctx context.Context, arg CreateThemeParams) (Theme, error) {
	row := q.queryRow(ctx, q.createThemeStmt, createTheme,
		arg.FacilityID,
		arg.Name,
		arg.IsSystem,
		arg.PrimaryColor,
		arg.SecondaryColor,
		arg.TertiaryColor,
		arg.AccentColor,
		arg.HighlightColor,
	)
	var i Theme
	err := row.Scan(
		&i.ID,
		&i.FacilityID,
		&i.Name,
		&i.IsSystem,
		&i.PrimaryColor,
		&i.SecondaryColor,
		&i.TertiaryColor,
		&i.AccentColor,
		&i.HighlightColor,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const deleteTheme = `-- name: DeleteTheme :execrows
DELETE FROM themes
WHERE id = ?1
`

func (q *Queries) DeleteTheme(ctx context.Context, id int64) (int64, error) {
	result, err := q.exec(ctx, q.deleteThemeStmt, deleteTheme, id)
	if err != nil {
		return 0, err
	}
	return result.RowsAffected()
}

const getTheme = `-- name: GetTheme :one

SELECT id, facility_id, name, is_system, primary_color, secondary_color, tertiary_color, accent_color, highlight_color, created_at, updated_at FROM themes
WHERE id = ?1
`

// internal/db/queries/themes.sql
func (q *Queries) GetTheme(ctx context.Context, id int64) (Theme, error) {
	row := q.queryRow(ctx, q.getThemeStmt, getTheme, id)
	var i Theme
	err := row.Scan(
		&i.ID,
		&i.FacilityID,
		&i.Name,
		&i.IsSystem,
		&i.PrimaryColor,
		&i.SecondaryColor,
		&i.TertiaryColor,
		&i.AccentColor,
		&i.HighlightColor,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const listFacilityThemes = `-- name: ListFacilityThemes :many
SELECT id, facility_id, name, is_system, primary_color, secondary_color, tertiary_color, accent_color, highlight_color, created_at, updated_at FROM themes
WHERE facility_id = ?1
ORDER BY name
`

func (q *Queries) ListFacilityThemes(ctx context.Context, facilityID sql.NullInt64) ([]Theme, error) {
	rows, err := q.query(ctx, q.listFacilityThemesStmt, listFacilityThemes, facilityID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []Theme
	for rows.Next() {
		var i Theme
		if err := rows.Scan(
			&i.ID,
			&i.FacilityID,
			&i.Name,
			&i.IsSystem,
			&i.PrimaryColor,
			&i.SecondaryColor,
			&i.TertiaryColor,
			&i.AccentColor,
			&i.HighlightColor,
			&i.CreatedAt,
			&i.UpdatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const listSystemThemes = `-- name: ListSystemThemes :many
SELECT id, facility_id, name, is_system, primary_color, secondary_color, tertiary_color, accent_color, highlight_color, created_at, updated_at FROM themes
WHERE facility_id IS NULL
ORDER BY name
`

func (q *Queries) ListSystemThemes(ctx context.Context) ([]Theme, error) {
	rows, err := q.query(ctx, q.listSystemThemesStmt, listSystemThemes)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []Theme
	for rows.Next() {
		var i Theme
		if err := rows.Scan(
			&i.ID,
			&i.FacilityID,
			&i.Name,
			&i.IsSystem,
			&i.PrimaryColor,
			&i.SecondaryColor,
			&i.TertiaryColor,
			&i.AccentColor,
			&i.HighlightColor,
			&i.CreatedAt,
			&i.UpdatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const updateTheme = `-- name: UpdateTheme :one
UPDATE themes
SET name = ?1,
    primary_color = ?2,
    secondary_color = ?3,
    tertiary_color = ?4,
    accent_color = ?5,
    highlight_color = ?6,
    updated_at = CURRENT_TIMESTAMP
WHERE id = ?7
RETURNING id, facility_id, name, is_system, primary_color, secondary_color,
    tertiary_color, accent_color, highlight_color, created_at, updated_at
`

type UpdateThemeParams struct {
	Name           string `json:"name"`
	PrimaryColor   string `json:"primaryColor"`
	SecondaryColor string `json:"secondaryColor"`
	TertiaryColor  string `json:"tertiaryColor"`
	AccentColor    string `json:"accentColor"`
	HighlightColor string `json:"highlightColor"`
	ID             int64  `json:"id"`
}

func (q *Queries) UpdateTheme(ctx context.Context, arg UpdateThemeParams) (Theme, error) {
	row := q.queryRow(ctx, q.updateThemeStmt, updateTheme,
		arg.Name,
		arg.PrimaryColor,
		arg.SecondaryColor,
		arg.TertiaryColor,
		arg.AccentColor,
		arg.HighlightColor,
		arg.ID,
	)
	var i Theme
	err := row.Scan(
		&i.ID,
		&i.FacilityID,
		&i.Name,
		&i.IsSystem,
		&i.PrimaryColor,
		&i.SecondaryColor,
		&i.TertiaryColor,
		&i.AccentColor,
		&i.HighlightColor,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}
