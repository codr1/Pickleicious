// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.29.0
// source: clinics.sql

package db

import (
	"context"
	"database/sql"
)

const createClinicType = `-- name: CreateClinicType :one

INSERT INTO clinic_types (
    facility_id,
    name,
    description,
    min_participants,
    max_participants,
    price_cents,
    status
) VALUES (
    ?1,
    ?2,
    ?3,
    ?4,
    ?5,
    ?6,
    ?7
)
RETURNING id, facility_id, name, description, min_participants, max_participants,
    price_cents, status, created_at, updated_at
`

type CreateClinicTypeParams struct {
	FacilityID      int64          `json:"facilityId"`
	Name            string         `json:"name"`
	Description     sql.NullString `json:"description"`
	MinParticipants int64          `json:"minParticipants"`
	MaxParticipants int64          `json:"maxParticipants"`
	PriceCents      int64          `json:"priceCents"`
	Status          string         `json:"status"`
}

// internal/db/queries/clinics.sql
func (q *Queries) CreateClinicType(ctx context.Context, arg CreateClinicTypeParams) (ClinicType, error) {
	row := q.queryRow(ctx, q.createClinicTypeStmt, createClinicType,
		arg.FacilityID,
		arg.Name,
		arg.Description,
		arg.MinParticipants,
		arg.MaxParticipants,
		arg.PriceCents,
		arg.Status,
	)
	var i ClinicType
	err := row.Scan(
		&i.ID,
		&i.FacilityID,
		&i.Name,
		&i.Description,
		&i.MinParticipants,
		&i.MaxParticipants,
		&i.PriceCents,
		&i.Status,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const deleteClinicType = `-- name: DeleteClinicType :execrows
DELETE FROM clinic_types
WHERE id = ?1
  AND facility_id = ?2
`

type DeleteClinicTypeParams struct {
	ID         int64 `json:"id"`
	FacilityID int64 `json:"facilityId"`
}

func (q *Queries) DeleteClinicType(ctx context.Context, arg DeleteClinicTypeParams) (int64, error) {
	result, err := q.exec(ctx, q.deleteClinicTypeStmt, deleteClinicType, arg.ID, arg.FacilityID)
	if err != nil {
		return 0, err
	}
	return result.RowsAffected()
}

const getClinicType = `-- name: GetClinicType :one
SELECT id, facility_id, name, description, min_participants, max_participants,
    price_cents, status, created_at, updated_at
FROM clinic_types
WHERE id = ?1
  AND facility_id = ?2
`

type GetClinicTypeParams struct {
	ID         int64 `json:"id"`
	FacilityID int64 `json:"facilityId"`
}

func (q *Queries) GetClinicType(ctx context.Context, arg GetClinicTypeParams) (ClinicType, error) {
	row := q.queryRow(ctx, q.getClinicTypeStmt, getClinicType, arg.ID, arg.FacilityID)
	var i ClinicType
	err := row.Scan(
		&i.ID,
		&i.FacilityID,
		&i.Name,
		&i.Description,
		&i.MinParticipants,
		&i.MaxParticipants,
		&i.PriceCents,
		&i.Status,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const listClinicTypesByFacility = `-- name: ListClinicTypesByFacility :many
SELECT id, facility_id, name, description, min_participants, max_participants,
    price_cents, status, created_at, updated_at
FROM clinic_types
WHERE facility_id = ?1
ORDER BY name
`

func (q *Queries) ListClinicTypesByFacility(ctx context.Context, facilityID int64) ([]ClinicType, error) {
	rows, err := q.query(ctx, q.listClinicTypesByFacilityStmt, listClinicTypesByFacility, facilityID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []ClinicType
	for rows.Next() {
		var i ClinicType
		if err := rows.Scan(
			&i.ID,
			&i.FacilityID,
			&i.Name,
			&i.Description,
			&i.MinParticipants,
			&i.MaxParticipants,
			&i.PriceCents,
			&i.Status,
			&i.CreatedAt,
			&i.UpdatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const updateClinicType = `-- name: UpdateClinicType :one
UPDATE clinic_types
SET name = ?1,
    description = ?2,
    min_participants = ?3,
    max_participants = ?4,
    price_cents = ?5,
    status = ?6,
    updated_at = CURRENT_TIMESTAMP
WHERE id = ?7
  AND facility_id = ?8
RETURNING id, facility_id, name, description, min_participants, max_participants,
    price_cents, status, created_at, updated_at
`

type UpdateClinicTypeParams struct {
	Name            string         `json:"name"`
	Description     sql.NullString `json:"description"`
	MinParticipants int64          `json:"minParticipants"`
	MaxParticipants int64          `json:"maxParticipants"`
	PriceCents      int64          `json:"priceCents"`
	Status          string         `json:"status"`
	ID              int64          `json:"id"`
	FacilityID      int64          `json:"facilityId"`
}

func (q *Queries) UpdateClinicType(ctx context.Context, arg UpdateClinicTypeParams) (ClinicType, error) {
	row := q.queryRow(ctx, q.updateClinicTypeStmt, updateClinicType,
		arg.Name,
		arg.Description,
		arg.MinParticipants,
		arg.MaxParticipants,
		arg.PriceCents,
		arg.Status,
		arg.ID,
		arg.FacilityID,
	)
	var i ClinicType
	err := row.Scan(
		&i.ID,
		&i.FacilityID,
		&i.Name,
		&i.Description,
		&i.MinParticipants,
		&i.MaxParticipants,
		&i.PriceCents,
		&i.Status,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}
