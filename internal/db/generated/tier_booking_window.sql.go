// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.29.0
// source: tier_booking_window.sql

package db

import (
	"context"
)

const deleteTierBookingWindow = `-- name: DeleteTierBookingWindow :execrows
DELETE FROM member_tier_booking_windows
WHERE facility_id = ? AND membership_level = ?
`

type DeleteTierBookingWindowParams struct {
	FacilityID      int64 `json:"facilityId"`
	MembershipLevel int64 `json:"membershipLevel"`
}

func (q *Queries) DeleteTierBookingWindow(ctx context.Context, arg DeleteTierBookingWindowParams) (int64, error) {
	result, err := q.exec(ctx, q.deleteTierBookingWindowStmt, deleteTierBookingWindow, arg.FacilityID, arg.MembershipLevel)
	if err != nil {
		return 0, err
	}
	return result.RowsAffected()
}

const getFacilityTierBookingEnabled = `-- name: GetFacilityTierBookingEnabled :one
SELECT tier_booking_enabled
FROM facilities
WHERE id = ?
`

func (q *Queries) GetFacilityTierBookingEnabled(ctx context.Context, id int64) (bool, error) {
	row := q.queryRow(ctx, q.getFacilityTierBookingEnabledStmt, getFacilityTierBookingEnabled, id)
	var tier_booking_enabled bool
	err := row.Scan(&tier_booking_enabled)
	return tier_booking_enabled, err
}

const getTierBookingWindow = `-- name: GetTierBookingWindow :one

SELECT
    facility_id,
    membership_level,
    max_advance_days
FROM member_tier_booking_windows
WHERE facility_id = ? AND membership_level = ?
`

type GetTierBookingWindowParams struct {
	FacilityID      int64 `json:"facilityId"`
	MembershipLevel int64 `json:"membershipLevel"`
}

// internal/db/queries/tier_booking_window.sql
func (q *Queries) GetTierBookingWindow(ctx context.Context, arg GetTierBookingWindowParams) (MemberTierBookingWindow, error) {
	row := q.queryRow(ctx, q.getTierBookingWindowStmt, getTierBookingWindow, arg.FacilityID, arg.MembershipLevel)
	var i MemberTierBookingWindow
	err := row.Scan(&i.FacilityID, &i.MembershipLevel, &i.MaxAdvanceDays)
	return i, err
}

const listTierBookingWindowsForFacility = `-- name: ListTierBookingWindowsForFacility :many
SELECT
    facility_id,
    membership_level,
    max_advance_days
FROM member_tier_booking_windows
WHERE facility_id = ?
ORDER BY membership_level
`

func (q *Queries) ListTierBookingWindowsForFacility(ctx context.Context, facilityID int64) ([]MemberTierBookingWindow, error) {
	rows, err := q.query(ctx, q.listTierBookingWindowsForFacilityStmt, listTierBookingWindowsForFacility, facilityID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []MemberTierBookingWindow
	for rows.Next() {
		var i MemberTierBookingWindow
		if err := rows.Scan(&i.FacilityID, &i.MembershipLevel, &i.MaxAdvanceDays); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const upsertTierBookingWindow = `-- name: UpsertTierBookingWindow :one
INSERT INTO member_tier_booking_windows (
    facility_id,
    membership_level,
    max_advance_days
) VALUES (?, ?, ?)
ON CONFLICT(facility_id, membership_level) DO UPDATE SET
    max_advance_days = excluded.max_advance_days
RETURNING
    facility_id,
    membership_level,
    max_advance_days
`

type UpsertTierBookingWindowParams struct {
	FacilityID      int64 `json:"facilityId"`
	MembershipLevel int64 `json:"membershipLevel"`
	MaxAdvanceDays  int64 `json:"maxAdvanceDays"`
}

func (q *Queries) UpsertTierBookingWindow(ctx context.Context, arg UpsertTierBookingWindowParams) (MemberTierBookingWindow, error) {
	row := q.queryRow(ctx, q.upsertTierBookingWindowStmt, upsertTierBookingWindow, arg.FacilityID, arg.MembershipLevel, arg.MaxAdvanceDays)
	var i MemberTierBookingWindow
	err := row.Scan(&i.FacilityID, &i.MembershipLevel, &i.MaxAdvanceDays)
	return i, err
}
